# 定时任务



| 字段 | 允许值                | 允许的特殊字符  |
| ---- | --------------------- | --------------- |
| 秒   | 0-59                  | , - * /         |
| 分   | 0-59                  | , - * /         |
| 小时 | 0-23                  | , - * /         |
| 日期 | 1-31                  | , - * ? / L W C |
| 月份 | 1-12                  | , - * /         |
| 星期 | 0-7或SUN-STA 0,7是SUN | , - * ? / L C # |

**描述：项目开发中经常需要执行一些定时任务，比如需要在每天凌晨的时候，分析一次前天的日志信息。Spring 为我们提供了异步执行任务的调度的方式，提供TaskExecutor（任务执行器接口） 、TaskScheduler 接口（任务计划程序接口）。**

在主启动类上添加注解

**@EnableScheduling**

方法名上添加注解

**@Schedule**     ==》时间表

```java
@Service
public class ScheduledService{
    /**
    *second as well as minute, hour, day of month, month
    *and day of week
    * 0 * * * * MON-FRI 秒 分 时 日 月 周几
    * 其中 * 代表任意时刻
    * 代表 周一到周五每一分钟都执行一次
    */
    @Scheduled(cron = "0 * * * * MON-FRI")
    public void hello(){
        Sout("hello");
    }
}
```

<u>**注意！！！主启动类的注解不要掉**</u>

@EnableScheduling 开启时间表

| 特殊字符 | 代表含义                   |
| -------- | -------------------------- |
| ，       | 枚举                       |
| -        | 区间                       |
| *        | 任意                       |
| /        | 步长                       |
| ？       | 日 / 星期冲突匹配          |
| L        | 最后                       |
| W        | 工作日                     |
| C        | 和calendar联系后计算过的值 |
| #        | 星期，4#2 第二个星期四     |

枚举实例：

@Schedule(cron = "0,1,2,3,4,5 * * * * W")

步长实例：

@Scheduled(cron = "0/5 * * * * W")

工作日的每5秒执行一次

Eg:

0 0-5 14,18 * * ? 每天14点整和18点整，每隔5分钟执行一次

0 15 10 ？ * 1-6 每个月的周一至周六10：15分执行一次

0 0 2 ？ * 6L 每个月的最后一个周六凌晨2点执行一次

0 0 2 LW * ? 每隔月的最后一个工作日凌晨2点执行一次

0 0 2-4 ？ * 1#1 每个月的第一个周一凌晨2点到4点期间，每个整点都执行一次



